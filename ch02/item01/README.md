# CH 2. 객체 생성과 파괴

# 아이템1 : 생성자 대신 정적 팩터리 메서드를 고려하라

정적 팩터리 메서드는 클래스의 인스턴스를 반환하는 단순한 역할을 한다.

<br>

### 정적 팩터리 메서드 장점

1. **이름을 가질 수 있다**:

   정적 팩터리 메서드를 통해 객체를 반환하는 방법은 생성자를 통해 객체를 반환하는 방식과 비교했을 때,반환될 객체의 특성을 쉽게 묘사할 수 있다.**(정적 팩터리 메서드의 네이밍을 적절히 해야함)**

   ```java
   public class CarFactory(){

   	// 옵션이 없는 기본 차 생성
   	public static Car createBasicCar(){
   		return new Car();
   	}

   	// 옵션이 있는 차 생성
   	public static Car createOptionCar(Option option){
   		Car car = new Car();
   		car.applyOption(option);
   		return car;
   	}
   	...
   }
   ```

   → 생성자를 통해 반환되는 객체를 본인이 아닌 다른 사람이 사용할 때 객체의 내부 구조를 이해하는데 추가적인 시간이 소요될 가능성이 있음! (한 클래스에 시그니처가 같은 생성자가 여러 개 있을 경우)

2. **호출될 때마다 인스턴스를 새로 생성하지는 않아도 된다**:

   반복되는 요청에 매번 새로운 객체를 생성해 반환할 필요가 없을 경우, 미리 객체를 생성(캐싱)해 두어 반복되는 요청마다 해당 객체를 조회하여 반환하는 방식으로 성능을 개선할 수 있다.

3. **반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다:**

   정적 팩터리 메서드는 반환값을 가지기 때문에 반환되는 객체의 클래스를 자유롭게 선택 할 수 있다.

   (ex. 상속 구조를 가진 객체를 반환할 때 특정 조건이나 분기에 따라 하위 타입 객체를 반환할 수 있다.)

4. **입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다.**

   정적 팩터리 메서드는 반환 타입의 하위 타입이기만 하면 어떤 클래스의 객체를 반환해도 상관 없다.

<br>

### 정적 팩터리 메서드 단점

1. **정적 팩터리 메서드만 존재하는 클래스의 경우 상속이 불가능하다**
2. **정적 팩터리 메서드는 프로그래머가 찾기 어렵다**

   정적 팩터리 메서드는 프로그래머가 정의한 메서드이기 때문에 다른 프로그래머가 사용하기 쉽게 하기 위해 널리 알려진 규약을 따라 짓는 방식으로 문제를 완화해줘야 한다.

<br>

### 정적 팩터리 메서드 네이밍 컨벤션

- `from` : 매개 변수를 하나 받아 해당 타입의 인스턴스를 반환
- `of` : 여러 매개변수를 받아 적합한 타입의 인스턴스를 반환
- `valueOf` : `from`, `of` 의 자세한 버전
- `getInstance` / `instance` : 인스턴스를 생성. 같은 인스턴스임은 보장하지 않는다.
- `newInstance` / `create` : 매번 새로운 인스턴스 생성을 보장한다.
- `getType` : `getInstance` 와 같으나 메서드를 정의한 클래스가 아닌 다른 클래스의 타입을 반환
- `newType` : `newInstance` 와 같으나 메서드를 정의한 클래스가 아닌 다른 클래스의 타입을 반환
